데이터 분석에 있어서 필수적인 요소들은 무엇이 있을까?

첫 번째는 데이터가 있어야 하고, 두 번째는 그 데이터를 분석해야한다.
여기까지가 끝이 아니라, 분석한 데이터를 사용하기 편의하게 시각화하는 것도 매우 중요하다.
수치적자료같은 데이터들을 보기 좋게 시각화할 때 가장 잘 쓰이는 방법은 무엇이 있을까?

그래프가 매우 효과적인 방법 중 하나라고 할 수 있다.

그래프는 대표적으로 네 종류로 소개 할 수 있는데
범주적 자료를 나타내느냐, 연속형 자료를 나타내느냐에 따라서 막대 그래프와 히스토그램으로 나눌 수 있다.

막대 그래프를 먼저 설명하자면 범주적 자료에서 많이 쓰이는 그래프로
범주적 자료는 쉽게 설명해서 고정적이고 해당 값만 존재할 뿐 값들 사이의 값은 존재하지 않는 형태이다.
예를 들어서 성별자료로는 남자 또는 여자만 존재하지 남자와 여자 사이의 값은 존재하지 않는다.
그리고 학년을 따질 때, 1학년부터 4학년까지 있으며, 1.5학년이나 2.6학년같은 사이 값이 존재하지 않는다.
이러한 자료들을 범주적 자료라고 하고 이를 막대 그래프를 통해서 잘 나타낼 수 있다.

히스토그램의 경우 연속적인 양적 자료를 그래프화할 때 사용하기 용이한 그래프이다.
연속적인 자료를 사용하기 때문에 예시를 들자면, 상온을 나타낼 때는 0도부터 그 위로 연속적인 값들로 수치를 나타낼 수 있다.
몸무게나 키 또한 정해진 정수값이 아니라 양의 실수 값들로 연속적으로 나타낼 수 있다.

막대 그래프와 히스토그램의 주요한 차이점은 앞서 말한 자료의 형태에 있기 때문에
그래프의 면적과 관련이 있다. 막대 그래프는 일정한 폭의 막대과 간격들로 되어 있으며
따라서 막대의 높이가 데이터의 의미를 나타내지만, 히스토그램은 높이뿐만 아니라 면적 자체도 살펴봐야한다.

그 다음으로는 꺽은선 그래프가 있는데 이는 도수를 선으로 연결해서 표시하는 것으로, 시간의 흐름에 따라
주기적으로 발생하는 시계열 자료에 많이 이용한다는 특징이 있다.
이런 그래프는 하루의 기온을 시간별로 나타내는 그래프나, 연평균기온 그래프같은 사례에서 잘 쓰인다.

그 외에도 다양한 방식의 그래프들이 있지만 앞서 말한 세 가지 그래프가 대표적으로 많이 쓰인다.


이러한 데이터들을 분석하여 데이터들의 특성에 따라 시각화하기 용이한 그래프들을 알아봤다.
이번에는 데이터 자료들을 사용하기 용이하게 요약하는 방법들을 볼 텐데,

자료의 중심을 나타내는 중심화 경향치성향을 지닌 대표값과 자료의 흩어진 정도를 나타내는 특성치인 산포값이 대표적인 방식이다.

우선 대표값에선 최빈값(mode), 중앙치(median), 산술평균(mean)이 대표적이다.

최빈값(mode)은 말 그대로 가장 빈도수가 많은 값을 나타내는 값이다.
중앙치(median)는 값들을 크기순으로 나열했을 때, 가운데 순서에 위치하는 값이 중앙치이다.
만약 값들의 갯수가 짝수개일 경우 가운데 순서에 위치한 두 개의 값의 평균값을 나타내면 된다.
마지막으로 산술평균(mean)은 값들의 평균값을 나타낸다.

이 세 가지 값은 자료의 분포형태에 따라서 중심화경향을 잘 나타내는 값들이 바뀌는데
분포의 정도가 평균을 기준으로 좌우가 같은 대칭분포의 경우는 평균 = 중앙치 = 최빈치의 형태를 띠고 있다.

하지만, 자료의 값들이 좌측 또는 우측에 꼬리형태로 분포하게 되는 꼬리분포형태일 경우에는
평균 < 중앙값 < 최빈값 또는 평균 > 중앙값 > 최빈값의 형태를 띠고 있다.
그러므로 데이터의 분포형태를 잘 파악하고 우리가 찾고자하는 값이 무엇인지 정하고 필요한 값을 구하는게 중요하다.


이제 산포값을 살펴볼 차례인데, 산포값은 크게 범위(range), 분산(variance), 표준편차(standard deviation)이 있다.
범위는 자료의 최대값과 최소값을 뺀 값으로, 이를 통해서 자료의 범위가 어느정도인지를 파악할 수 있다.
다음 분산인데, 평균에서 퍼진 정도를 나타낼 때 분산을 사용한다.
물론, 관찰치에서 평균을 뺀 편차를 사용해도 되지만,
편차는 개별 값이 평균으로부터 얼마큼 퍼져있는지를 보는 것이고
분산은 전체적인 값들이 퍼진 정도를 나타내기 때문에 분산을 많이 사용하는 편이다.

분산을 구하는 방법으로는 E(관찰치 - 평균)**2 / 전체 데이터갯수 로 나타낼 수 있다.
이 분산에서 제곱근을 해준다면 표준편차를 구할 수 있다.
하지만 여기서 우리가 조사할 데이터의 양이 방대하거나 셀 수 없는 경우라면 일부의 표본만 채취해서
검사해도 어느정도 확실하게 조사할 수 있다.
표뵨으로 검사할 떈, 분산을 구할 때 전체 데이터 갯수로 나누는게 아닌 (전체 데이터 갯수 - 1)로 나누어주어야 한다는 점이 있다.
우린 이런 것을 자유도라고 부른다.

그래 이를 수학적 기호로 표시해보자면 모집단의 분산과 표준편차는 V또는 시그마 제곱과 시그마,
표본의 분산과 표준편차는 s제곱과 s로 표기한다.

마지막으로 사분편차이다.
사분편차는 쉽게 4분위로 그린 그림에서 박스플롯의 그림을 그려서 분포의 형태를 보기 쉽게 나타낼 수 있으며
그 외에도 평균적인 값에서 크게 벗어난 몇몇개의 이상치값들도 파악하기 쉽게 나타낼 수있다는 특징이 있다.

우선 박스의 값을 나타내기 위해서 Q1,Q2,Q3로 지점을 찍어주는데 Q2는 중앙치, Q1은 하위 25%의 값 Q3는 상위 25%의 값이다.
여기서 Q3 - Q1을 IQR이라고 부르는데 사분편차인 QD는  IQR/2로 나타낼 수 있다.
그 다음 IQR * 1.5의 값을 Q1에서 빼고 Q3에서는 더해서 해당 값과 제일 인접한 실제 데이터값이 울타리값으로 지정할 수 있다.

산포값들을 설명하면서 사분편차와 박스플롯도 같이 설명하였다.
여기서 박스플롯같이 데이터들을 요약시키는 방법들이 한 가지 더 이쓴ㄴ데
줄기-잎 그림이다.
특징으로는 원자료가 그대로 보존된다는 점, 크기순으로 나열되어서 중앙값과 사분위수를 구하기 쉽다는 특징이 있고
단점으로는 값이 너무 많으면 그리기 힘들다는 점이 있다.
이 그림은 줄기값을 기준으로 잎값들을 해당 줄기값에서 차례로 나열하는 방식이다.

여기까지 각 데이터들을 보기 쉽게 정리하고 시각화하는 방식들을 알아봤다.
그런데, 만약 데이터를 한 가지가 아니라 여러 종류의 데이터를 한번에 보려면 어떻게 해야할까?

이전에도 몇 번 언급했지만 데이터들을 하나로 합치거나 표준화하는 방법이 있다.
통계학에서는 표준화하는 방법을 사용하는데 다음 예제를 통해서 표준화를 자세히 알아보자

Q. 철수는 평균 18시간 공부하며 성적은 80점이 나온다.
철수가 속한 반의 학생들 평균 공부시간은 15시간이며 성적은 78점이 나오는데 공부시간과 성적의 표준편차는 각각 5와 10이다.
철수의 공부시간 대비 성적의 효율을 설명해 보시오.

여기서는 데이터가 공부시간과 성적 두 가지가 존재한다.
통계학에선 데이터들의 평균과 표준편차를 각각 0과 1로 통일 시켜주는 과정을 거침으로써 두 데이터들을 표준화 시킬 수 있다.
방법으로는 Z = (해당값 - 평균) / 표준편차 로 구할 수 있다.
따라서 공부시간은 (18-15)/5 = 0.6
성적은 (80-78)/10 = 0.2 이다
평균이 0인 상태에서 공부시간이 성적보다 값이 더 크게 표준화되어서 나왔으므로 
철수는 공부시간 대비 성적 향상의 효율이 좋지 못하다고 볼 수 있다.

위의 예제를 풀이한 방식처럼 데이터들을 표준화하여 볼 수 있다.

여러 데이터를 그래프 상으로 나타내었을 때 퍼져있는 정도의 그림을 산점도라고 하는데
산점도는 XY평면으로 나타난다.
이럴 때 공분산과 상관계수를 이용해서 두 변수의 관련성을 파악할 수 있는데,

공분산의 경우 두 변수의 값이 각각의 평균으로부터 떨어진 정도를 나타내는 특성치를 말하며 구하는 방식은 저번에 표기했으므로 생략하겠다.
상관계수는 공분산을 두 변수의 표준편차로 나누어 표준화한 값으로

상관계수의 특징은 -1에서 1사이의 값을 갖는다는 점. 1이면 완전한 양의 관계, -1이면 완전한 음의 관계를 갖는다.
또한 상관계수는 산점도의 값들을 하나의 선으로 요약하는 회귀선을 그엇을 떄, 직선인지 아닌지만을 알 수 있고,
값들의 인과관계를 알려주지는 않는다. 상관관계가 강할수록 1 또는 -1에 가깝고 0에 가까울 수록 관계가 약하다.
이러한 상관계수는 등간척도 또는 비율척도와 같은 연속형 자료에서 사용된다는 특징이 있다.

이렇게 데이터들에 대해서 시각화하는 법과 특성에 따라 정리하는 법을 봤는데,
그 다음에 R이라는 프로그램을 통해 실제 데이터를 시각화하고 구조화하는 프로그램을 다뤄봤다. 

R에서는 str() 함수를 통해서 우선 실제 데이터의 구조를 확인해보았으며

실제 plot()함수를 통해서 산점도의 형태로 데이터를 확인해보기도 했다.
# 산점도
plot(cars$speed,cars$dist,xlab="속도",ylab="거리",pch=1,col="red")

또한 데이터자료들을 지정파일에 넣고 load()함수로 불러왔으며
# 데이터 불러오기
load("data.rda")

데이터 자체는 꽤 방대하고 사소한 것까지 기록하기 때문에 전처리 과정을 통해 필요없거나 보기 쉽게 값을 조정하기도 한다.
# 데이터 전처리 null값 지정
data$V2[is.na(data$V2)] <- 0

#na.omit -> null값 삭제

# 문자형 -> 숫자형 변경
data$V2 <- as.numeric(data$V2)


# 데이터 빈도수 확인 만들기 table()
table4 <- table(data$V4)
table4

# 막대그래프 생성
barplot(table4,xlab="교육정도",ylab="빈도수")

# 히스토그램으로 표현하기 
hist(data$V2,xlab="연령",ylab="빈도수")

#파이차트 cex 차트의 글자 크기
pie(table4,cex=1)

# boxplot
str(cars)
boxplot(cars$dist)

# csv파일 읽어오기
tinocafe <- read.csv("cafedata.csv",header=T,na.strings = "na",stringsAsFactors = FALSE)

str(tinocafe)
tinocoffe <- tinocafe$Coffees
mean(tinocoffe,na.rm = TRUE)


위의 코드들처럼 다양하게 값들을 앞서 말했던 여러 형태의 그래프로 시각화를 하고 데이터 전처리를 하는 등의 작업을 직접해보고 배웠다.
