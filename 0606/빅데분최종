지난 시간에 통계자료를 분석하고 세운 가설을 정리하자면 다음과 같다.

20대 고객들을 대상으로 거래내역을 조사했을 때,

일반적으로 2천원에서 5천원 가까이 소비하는 경우가 대다수고 수염의 범위까지 따졌을 땐 9천원에서 0원에 가깝게 소비한다.
이상치의 범주는 1만원에서 9천원 사이로 집계된다.

소비하는 상품의 종류를 분석했을 때, 상위 3개와 하위 3개의 제품군들은 다음과 같다.

상위 3개: 야채, 면과자, 음주류

하위 3개: 곡물, 냉동, 수산

상위 3개의 제품군은 박스플롯에서 박스범위 안에 평균구매금액들이 들어가는 반면
하위 3개는 1개만 들어가고 이상치 범주인 제품군도 존재한다.

따라서 지난 주에는 가설을 20대는 음주류와 면과자 제품을 같이 사는 연관성이 있다고 가설을 내렸다.
그리고 야채류의 경우는 다이어트나 건강식과 관련이 있어서 구매한다고 생각했었다.

이번 주차에서는 연관이 있는지 확인 하기 위해서
세 가지 데이터 분석을 하고 모델링을 통해 확인하도록 하겠다.

1. 음주류 또는 면과자를 구매하는 고객이 음주류도 같이 구매하는가
2. 구매한다면 같이 구매하는가? 아니라면 어떤 음주류를 구매하는 고객들이 하나만 사는지 다른 제품도 사는지 확인
3. 야채류를 구매하는 고객들은 다른 제품도 구매하는지? 야채류를 구매하는 고객들의 특징은 무엇인지?

# 음주류에는 음료 주류 기타음주류가 있으며, 음료, 주류, 기타음주류로 순서가 나뉨
#csales_20[csales_20['상품대분류명'] == '음주류'].상품중분류명.value_counts()
# 음료       350
# 주류       185
# 기타음주류     25

#cust_al_list['상품대분류명'].value_counts()


음주류를 구매하는 구매내역에서 구매하는 제품군
면과자, 야채, 낙농 순으로 제품을 많이 구매함


상품대분류명
음주류     560
야채      469
면과자     455
낙농      284
일상용품    209
청과      187
일반식품    164
델리카     132
냉장      116
조미료류    115
수산       91
축산       87
냉동       71
곡물       20
Name: count, dtype: int64


음주류를 구매하는 구매내역에서 야채는 근채류, 과채류, 두채류순으로 많이구매함
근채류: 뿌리야채(무,당근 등)
과채류: 과일채소가 결합된 종류(수박,딸리,토마토 등)
두채류: 콩에 속하는 식물(콩나물 등)

상품중분류명
근채류      19
과채류      15
두채류      11
엽채류       9
양채류       8
버섯류       7
계란류       6
기타야채      2
김치채소류     2
Name: count, dtype: int64


야채를 구매하는 구매내역에서 구매하는 제품군(음주류를 구매한 고객기준)
음주류, 면과자, 청과순으로 많이 구매함
하지만 음주류를 기준으로 봤을 때와는 달리 음주류를 많이 구매하지 않음
그리고 그 중에서도 음료와 주류의 비중은 음료가 1.5배 많음
 
상품대분류명
야채      469
음주류      64
면과자      49
청과       43
낙농       35
일반식품     33
조미료류     30
냉장       29
축산       25
일상용품     24
수산       22
델리카      14
냉동       14
곡물        7
Name: count, dtype: int64


야채를 구매하는 구매내역에서 구매하는 제품군(음주류를 구매한 거래내역기준)
음주류, 면과자, 냉장순으로 많이 구매함

상품대분류명
야채      79
음주류     64
면과자     15
냉장       8
일반식품     8
청과       7
낙농       6
델리카      5
조미료류     5
일상용품     4
수산       3
축산       3
곡물       2
냉동       1
Name: count, dtype: int64


통계들이 여러 방면에서 다양하게 나오기 때문에 
두 가지 가설을 추론할 수 있다.

1. 20대 고객들에서 음주류 구매와 면과자 구매는 연관성이 있다.
2. 20대 고객들에서 음주류 구매와 야채 구매는 연관성이 있다.

두 가지 가설을 검증하기 위해서


추가적인 데이터 전처리는 다음과 같이 한다.

1-1. 거래식별ID를 기준으로 묶어서 음주류와 면과자가 없은 행들은 제거해 준다.
1-2. 만일 음주류와 면과자가 같이 구매되면 1을 아니면 0을 준다.
1-3. 로지스틱 회귀를 통해서 결과가 연관성있는지 확인

2-1. 거래식별ID를 기준으로 묶어서 음주류와 야채가 없은 행들은 제거해 준다.
2-2. 만일 음주류와 야채가 같이 구매되면 1을 아니면 0을 준다.
2-3. 로지스틱 회귀를 통해서 결과가 연관성있는지 확인


결과는 야채와 음주류의 상관관계는 유의미하지 않다는 결과이며
면과자와 음주류는 어느정도 의미를 갖는다는 결과가 나왔다.

해석해보자면

면과자와 음주류가 상관관계가 있는 이유는
음주류에는 술도 있지만 음료도 있기 때문에
아마 술안주로 소비하거나 단순히 과자를 먹으며 음료도 같이 마시는 것이라 추측된다.
따라서 판매전략에 있어서는 야채와 음주류는 좀 더 상관관계를 연구해봐야하며
면과자의 경우는 음주류와 면과자를 세트로 구매 시 할인을 적용하거나
같이 묶어서 판매하는 식으로 하여 판매량을 늘리는 전략을 추천한다.
